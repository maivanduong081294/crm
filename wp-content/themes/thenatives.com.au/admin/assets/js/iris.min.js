(function(r,i){function t(){if(l)h="filter";else{var i=r('<div id="iris-gradtest" />');r.each(p,function(r,t){if(i.css("backgroundImage",t+"linear-gradient(top,#fff,#000)"),i.css("backgroundImage").match("gradient"))return h=r,!1}),r.browser.webkit&&!1===h&&(i.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),i.css("backgroundImage").match("gradient")&&(h="webkit")),i.remove()}}function e(i,t){return i="top"===i?"top":"left",t=r.isArray(t)?t:Array.prototype.slice.call(arguments,1),"webkit"===h?o(i,t):p[h]+"linear-gradient("+i+", "+t.join(", ")+")"}function s(i,t){i="top"===i?"top":"left",t=r.isArray(t)?t:Array.prototype.slice.call(arguments,1);var e="top"===i?0:1,s=r(this),o=t.length-1,n=parseInt(r.browser.version,10)>=8?"-ms-filter":"filter";n="filter";var c=1===e?"left":"top",l=1===e?"right":"bottom",h='<div class="iris-ie-gradient-shim" style="position:absolute;'+(1===e?"height":"width")+":100%;"+c+":%start%;"+l+":%end%;"+n+':%filter%;" data-color:"%color%"></div>',p="";"static"===s.css("position")&&s.css({position:"relative"}),t=a(t),r.each(t,function(r,i){if(r===o)return!1;var s=t[r+1];if(i.stop!==s.stop){var a=100-parseFloat(s.stop)+"%";i.octoHex=new Color(i.color).toIEOctoHex(),s.octoHex=new Color(s.color).toIEOctoHex();var n="progid:DXImageTransform.Microsoft.Gradient(GradientType="+e+", StartColorStr='"+i.octoHex+"', EndColorStr='"+s.octoHex+"')";p+=h.replace("%start%",i.stop).replace("%end%",a).replace("%filter%",n)}}),s.find(".iris-ie-gradient-shim").remove(),r(p).prependTo(s)}function o(i,t){var e=[];return i="top"===i?"0% 0%,0% 100%,":"0% 100%,100% 100%,",t=a(t),r.each(t,function(r,i){e.push("color-stop("+parseFloat(i.stop)/100+", "+i.color+")")}),"-webkit-gradient(linear,"+i+e.join(",")+")"}function a(i){var t=[],e=[],s=[],o=i.length-1;return r.each(i,function(r,i){var s=i,o=!1,a=i.match(/1?[0-9]{1,2}%$/);a&&(s=i.replace(/\s?1?[0-9]{1,2}%$/,""),o=a.shift()),t.push(s),e.push(o)}),!1===e[0]&&(e[0]="0%"),!1===e[o]&&(e[o]="100%"),e=n(e),r.each(e,function(r){s[r]={color:t[r],stop:e[r]}}),s}function n(i){var t,e,s,o,a=0,c=i.length-1,l=0,h=!1;if(i.length<=2||r.inArray(!1,i)<0)return i;for(;l<i.length-1;)h||!1!==i[l]?h&&!1!==i[l]&&(c=l,l=i.length):(a=l-1,h=!0),l++;for(e=c-a,o=parseInt(i[a].replace("%"),10),t=(parseFloat(i[c].replace("%"))-o)/e,l=a+1,s=1;l<c;)i[l]=o+s*t+"%",s++,l++;return n(i)}var c='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',l=!!(r.browser.msie&&parseInt(r.browser.version,10)<10),h=!1,p=["-moz-","-webkit-","-o-","-ms-"];if(l&&parseInt(r.browser.version,10)<=7)return r.fn.iris=r.noop;r.fn.gradient=function(i){var t=arguments;return this.each(function(){l?s.apply(this,t):r(this).css("backgroundImage",e.apply(this,t))})},r.fn.raninbowGradient=function(i,t){i=i||"top";for(var e=r.extend({},{s:100,l:50},t),s="hsl(%h%,"+e.s+"%,"+e.l+"%)",o=0,a=[];o<=360;)a.push(s.replace("%h%",o)),o+=30;return this.each(function(){r(this).gradient(i,a)})};var u={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_scale:{h:360,s:100,l:100,v:100},_create:function(){var i=this,e=i.element,s=i.options.color||e.val();if(!1===h&&t(),e.is("input")?(i.options.target?i.picker=r(c).appendTo(i.options.target):i.picker=r(c).insertAfter(e),i._addInputListeners(e)):(e.append(c),i.picker=e.find(".iris-picker")),r.browser.mozilla)i.picker.addClass("iris-mozilla");else if(r.browser.msie){var o=parseInt(r.browser.version,10);9===o?i.picker.addClass("iris-ie-9"):o<=8&&i.picker.addClass("iris-ie-lt9")}i.options.palettes&&i._addPalettes(),i.color=new Color(s).setHSpace(i.options.mode),i.options.color=i.color.toString(),i.controls={square:i.picker.find(".iris-square"),squareDrag:i.picker.find(".iris-square-value"),horiz:i.picker.find(".iris-square-horiz"),vert:i.picker.find(".iris-square-vert"),strip:i.picker.find(".iris-strip"),stripSlider:i.picker.find(".iris-strip .iris-slider-offset")},"hsv"===i.options.mode&&"l"===i.options.controls.vert&&(i.options.controls={horiz:"h",vert:"v",strip:"s"}),i.hue=i.color.h(),i.options.hide&&i.picker.hide(),i.options.border&&i.picker.addClass("iris-border"),i._initControls(),i.active="external",i._dimensions(),i._change()},_addPalettes:function(){var i=r("<div class='iris-palette-container' />"),t=r("<a class='iris-palette' tabindex='0' />"),e=r.isArray(this.options.palettes)?this.options.palettes:this._palettes;r.each(e,function(r,e){t.clone().data("color",e).css("backgroundColor",e).appendTo(i).height(10).width(10)}),this.picker.append(i)},_paint:function(){var r=this;r._paintDimension("top","strip"),r._paintDimension("top","vert"),r._paintDimension("left","horiz")},_paintDimension:function(r,i){var t,e=this,s=e.color,o=e.options.mode,a=e._getHSpaceColor(),n=e.controls[i],c=e.options.controls;if(i!==e.active&&("square"!==e.active||"strip"===i))switch(c[i]){case"h":if("hsv"===o){switch(a=s.clone(),i){case"horiz":a[c.vert](100);break;case"vert":a[c.horiz](100);break;case"strip":a.setHSpace("hsl")}t=a.toHsl()}else t="strip"===i?{s:a.s,l:a.l}:{s:100,l:a.l};n.raninbowGradient(r,t);break;case"s":"hsv"===o?"vert"===i?t=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===i?t=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===i&&(t=["#fff","hsl("+a.h+",100%,50%)"]):t="vert"===i&&"h"===e.options.controls.horiz?["hsla(0, 0%, "+a.l+"%, 0)","hsla(0, 0%, "+a.l+"%, 1)"]:["hsl("+a.h+",0%,50%)","hsl("+a.h+",100%,50%)"],n.gradient(r,t);break;case"l":t="strip"===i?["hsl("+a.h+",100%,100%)","hsl("+a.h+", "+a.s+"%,50%)","hsl("+a.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],n.gradient(r,t);break;case"v":t="strip"===i?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],n.gradient(r,t)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this.color.toHsv():this.color.toHsl()},_dimensions:function(i){var t,e,s,o=this,a=o.options,n=(o.picker.find(".iris-picker-inner"),o.controls.square),c=o.picker.find(".iris-strip"),l="77.5%",h="12%",p=a.border?a.width-20:a.width,u=r.isArray(a.palettes)?a.palettes.length:o._palettes.length;i&&(n.css("width",""),c.css("width",""),o.picker.removeAttr("style")),l=p*(parseFloat(l)/100),h=p*(parseFloat(h)/100),t=a.border?l+20:l,n.width(l).height(l),c.height(l).width(h),o.picker.css({width:a.width,height:t}),a.palettes&&(s=(l-(u-1)*(e=2*l/100))/u,o.picker.find(".iris-palette").each(function(i,t){var o=0===i?0:e;r(this).css({width:s,height:s,marginLeft:o})}),o.picker.css("paddingBottom",s+e),c.height(s+e+l))},_addInputListeners:function(r){var i=this,t=function(t){var e=new Color(r.val()),s=r.val().replace(/^#/,"");r.removeClass("iris-error"),e.error?""!==s&&r.addClass("iris-error"):e.toString()!==i.color.toString()&&("keyup"!==t.type||!s.match(/^[0-9a-fA-F]{3}$/))&&i._setOption("color",e.toString())};r.on("change",t).on("keyup",i._debounce(t,100))},_initControls:function(){var i=this,t=i.controls,e=t.square,s=i.options.controls,o=i._scale[s.strip];t.stripSlider.slider({orientation:"vertical",max:o,slide:function(r,t){i.active="strip","h"===s.strip&&(t.value=o-t.value),i.color[s.strip](t.value),i._change.apply(i,arguments)}}),t.squareDrag.draggable({containment:"parent",zIndex:1e3,cursor:"move",drag:function(r,t){i._squareDrag(r,t)},start:function(){e.addClass("iris-dragging"),r(this).addClass("ui-state-focus")},stop:function(){e.removeClass("iris-dragging"),r(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(t){t.preventDefault();var e="ui-state-focus";"mousedown"===t.type?(i.picker.find("."+e).removeClass(e).blur(),r(this).addClass(e).focus()):r(this).removeClass(e)}).on("keydown",function(r){var e=t.square,s=t.squareDrag,o=s.position(),a=i.options.width/100;switch(r.altKey&&(a*=10),r.keyCode){case 37:o.left-=a;break;case 38:o.top-=a;break;case 39:o.left+=a;break;case 40:o.top+=a;break;default:return!0}o.left=Math.max(0,Math.min(o.left,e.width())),o.top=Math.max(0,Math.min(o.top,e.height())),s.css(o),i._squareDrag(r,{position:o}),r.preventDefault()}),e.mousedown(function(t){if(1===t.which&&r(t.target).is("div")){var e=i.controls.square.offset(),s={top:t.pageY-e.top,left:t.pageX-e.left};t.preventDefault(),i._squareDrag(t,{position:s}),t.target=i.controls.squareDrag.get(0),i.controls.squareDrag.css(s).trigger(t)}}),i.options.palettes&&i.picker.find(".iris-palette-container").on("click",".iris-palette",function(t){i.color.fromCSS(r(this).data("color")),i.active="external",i._change()}).on("keydown",".iris-palette",function(i){if(13!==i.keyCode&&32!==i.keyCode)return!0;i.stopPropagation(),r(this).click()})},_squareDrag:function(r,i){var t=this,e=t.options.controls,s=t._squareDimensions(),o=Math.round((s.h-i.position.top)/s.h*t._scale[e.vert]),a=t._scale[e.horiz]-Math.round((s.w-i.position.left)/s.w*t._scale[e.horiz]);t.color[e.horiz](a)[e.vert](o),t.active="square",t._change.apply(t,arguments)},_setOption:function(r,i){this.options[r];if("color"===r){(i=""+i).replace(/^#/,"");var t=new Color(i).setHSpace(this.options.mode);t.error||(this.color=t,this.options.color=this.options[r]=this.color.toString(),this.active="external",this._change())}},_squareDimensions:function(r){var i,t=this.controls.square;return void 0!==r&&t.data("dimensions")?t.data("dimensions"):(this.controls.squareDrag,i={w:t.width(),h:t.height()},t.data("dimensions",i),i)},_isNonHueControl:function(r,i){return"square"===r&&"h"===this.options.controls.strip||"external"!==i&&("h"!==i||"strip"!==r)},_change:function(i,t){var e=this,s=e.controls,o=e._getHSpaceColor(),a=(e.color.toString(),["square","strip"]),n=e.options.controls,c=n[e.active]||"external",l=e.hue;"strip"===e.active?a=[]:"external"!==e.active&&a.pop(),r.each(a,function(r,i){var t;if(i!==e.active)switch(i){case"strip":t="h"===n.strip?e._scale[n.strip]-o[n.strip]:o[n.strip],s.stripSlider.slider("value",t);break;case"square":var a=e._squareDimensions(),c={left:o[n.horiz]/e._scale[n.horiz]*a.w,top:a.h-o[n.vert]/e._scale[n.vert]*a.h};e.controls.squareDrag.css(c)}}),o.h!==l&&e._isNonHueControl(e.active,c)&&e.color.h(l),e.hue=e.color.h(),e.options.color=e.color.toString(),e._inited&&e._trigger("change",{type:e.active},{color:e.color}),e.element.is(":input")&&!e.color.error&&(e.element.removeClass("iris-error"),e.element.val()!==e.color.toString()&&e.element.val(e.color.toString())),e._paint(),e._inited=!0,e.active=!1},_debounce:function(r,i,t){var e,s;return function(){var o=this,a=arguments,n=t&&!e;return clearTimeout(e),e=setTimeout(function(){e=null,t||(s=r.apply(o,a))},i),n&&(s=r.apply(o,a)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()}};r.widget("a8c.iris",u),r('<style id="iris-css">.iris-picker{display:block;position:relative}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,0.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:none;border:3px solid #fff;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:none;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}</style>').appendTo("head")})(jQuery),function(r,i){var t=function(r,i){return this instanceof t?this._init(r,i):new t(r,i)};t.fn=t.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(r){var t="noop";switch(typeof r){case"object":return r.a!==i&&this.a(r.a),t=r.r!==i?"fromRgb":r.l!==i?"fromHsl":r.v!==i?"fromHsv":t,this[t](r);case"string":return this.fromCSS(r);case"number":return this.fromInt(parseInt(r,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var r=new t(this.toInt()),i=["_alpha","_hSpace","_hsl","_hsv","error"],e=i.length-1;e>=0;e--)r[i[e]]=this[i[e]];return r},setHSpace:function(r){return this._hSpace="hsv"===r?r:"hsl",this},noop:function(){return this},fromCSS:function(r){var i,t=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,(r=r.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"")).match(t)&&r.match(/\)$/)){if((i=r.replace(/(\s|%)/g,"").replace(t,"").replace(/,?\);?$/,"").split(",")).length<3)return this._error();if(4===i.length&&(this.a(parseFloat(i.pop())),this.error))return this;for(var e=i.length-1;e>=0;e--)if(i[e]=parseInt(i[e],10),isNaN(i[e]))return this._error();return r.match(/^rgb/)?this.fromRgb({r:i[0],g:i[1],b:i[2]}):r.match(/^hsv/)?this.fromHsv({h:i[0],s:i[1],v:i[2]}):this.fromHsl({h:i[0],s:i[1],l:i[2]})}return this.fromHex(r)},fromRgb:function(r,t){return"object"!=typeof r||r.r===i||r.g===i||r.b===i?this._error():(this.error=!1,this.fromInt(parseInt((r.r<<16)+(r.g<<8)+r.b,10),t))},fromHex:function(r){return 3===(r=r.replace(/^#/,"").replace(/^0x/,"")).length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),this.error=!/^[0-9A-F]{6}$/i.test(r),this.fromInt(parseInt(r,16))},fromHsl:function(r){var t,e,s,o,a,n,c,l;return"object"!=typeof r||r.h===i||r.s===i||r.l===i?this._error():(this._hsl=r,this._hSpace="hsl",n=r.h/360,c=r.s/100,l=r.l/100,0===c?t=e=s=l:(o=l<.5?l*(1+c):l+c-l*c,a=2*l-o,t=this.hue2rgb(a,o,n+1/3),e=this.hue2rgb(a,o,n),s=this.hue2rgb(a,o,n-1/3)),this.fromRgb({r:255*t,g:255*e,b:255*s},!0))},fromHsv:function(r){var t,e,s,o,a,n,c,l,h,p,u;if("object"!=typeof r||r.h===i||r.s===i||r.v===i)return this._error();switch(this._hsv=r,this._hSpace="hsv",t=r.h/360,e=r.s/100,s=r.v/100,c=Math.floor(6*t),l=6*t-c,h=s*(1-e),p=s*(1-l*e),u=s*(1-(1-l)*e),c%6){case 0:o=s,a=u,n=h;break;case 1:o=p,a=s,n=h;break;case 2:o=h,a=s,n=u;break;case 3:o=h,a=p,n=s;break;case 4:o=u,a=h,n=s;break;case 5:o=s,a=h,n=p}return this.fromRgb({r:255*o,g:255*a,b:255*n},!0)},fromInt:function(r,t){return this._color=parseInt(r,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),t===i&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(r,i,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(i-r)*t:t<.5?i:t<2/3?r+(i-r)*(2/3-t)*6:r},toString:function(){var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var i=6-r.length-1;i>=0;i--)r="0"+r;return"#"+r},toCSS:function(r,i){switch(r=r||"hex",i=parseFloat(i||this._alpha),r){case"rgb":case"rgba":var t=this.toRgb();return i<1?"rgba( "+t.r+", "+t.g+", "+t.b+", "+i+" )":"rgb( "+t.r+", "+t.g+", "+t.b+" )";case"hsl":case"hsla":var e=this.toHsl();return i<1?"hsla( "+e.h+", "+e.s+"%, "+e.l+"%, "+i+" )":"hsl( "+e.h+", "+e.s+"%, "+e.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var r,i,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,a=Math.max(e,s,o),n=Math.min(e,s,o),c=(a+n)/2;if(a===n)r=i=0;else{var l=a-n;switch(i=c>.5?l/(2-a-n):l/(a+n),a){case e:r=(s-o)/l+(s<o?6:0);break;case s:r=(o-e)/l+2;break;case o:r=(e-s)/l+4}r/=6}return 0===(r=Math.round(360*r))&&this._hsl.h!==r&&(r=this._hsl.h),0===(i=Math.round(100*i))&&this._hsl.s&&(i=this._hsl.s),{h:r,s:i,l:Math.round(100*c)}},toHsv:function(){var r,i,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,a=Math.max(e,s,o),n=Math.min(e,s,o),c=a,l=a-n;if(i=0===a?0:l/a,a===n)r=i=0;else{switch(a){case e:r=(s-o)/l+(s<o?6:0);break;case s:r=(o-e)/l+2;break;case o:r=(e-s)/l+4}r/=6}return 0===(r=Math.round(360*r))&&this._hsv.h!==r&&(r=this._hsv.h),0===(i=Math.round(100*i))&&this._hsv.s&&(i=this._hsv.s),{h:r,s:i,v:Math.round(100*c)}},toInt:function(){return this._color},toIEOctoHex:function(){var r=this.toString(),i=parseInt(255*this._alpha,10).toString(16);return 1===i.length&&(i="0"+i),"#"+i+r.replace(/^#/,"")},toLuminosity:function(){var r=this.toRgb();return.2126*Math.pow(r.r/255,2.2)+.7152*Math.pow(r.g/255,2.2)+.0722*Math.pow(r.b/255,2.2)},getDistanceLuminosityFrom:function(r){if(r instanceof t){var i=this.toLuminosity(),e=r.toLuminosity();return i>e?(i+.05)/(e+.05):(e+.05)/(i+.05)}throw"getDistanceLuminosityFrom requires a Color object"},getMaxContrastColor:function(){var r=this.toLuminosity();return new t(r>=.5?"000000":"ffffff")},getGrayscaleContrastingColor:function(r){if(!r)return this.getMaxContrastColor();var i=r<5?5:r,t=this.getMaxContrastColor();if((r=t.getDistanceLuminosityFrom(this))<=i)return t;for(var e=0===t.toInt()?1:-1;r>i;)t=t.incrementLightness(e),r=t.getDistanceLuminosityFrom(this);return t},getReadableContrastingColor:function(r,e){if(!r instanceof t)return this;var s=e===i?5:e,o=r.getDistanceLuminosityFrom(this),a=r.getMaxContrastColor();if(a.getDistanceLuminosityFrom(r)<=s)return a;if(o>=s)return this;for(var n=0===a.toInt()?-1:1;o<s&&(this.incrementLightness(n),o=this.getDistanceLuminosityFrom(r),0!==this._color&&16777215!==this._color););return this},a:function(r){if(r===i)return this._alpha;var t=parseFloat(r);return isNaN(t)?this._error():(this._alpha=t,this)},darken:function(r){return r=r||5,this.l(-r,!0)},lighten:function(r){return r=r||5,this.l(r,!0)},saturate:function(r){return r=r||15,this.s(r,!0)},desaturate:function(r){return r=r||15,this.s(-r,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(r){var i=180+30*(r=r||1);return this.h(i,!0)},getAnalog:function(r){var i=30*(r=r||1);return this.h(i,!0)},getTetrad:function(r){var i=60*(r=r||1);return this.h(i,!0)},getTriad:function(r){var i=120*(r=r||1);return this.h(i,!0)},_partial:function(r){var t=e[r];return function(e,s){var o=this._spaceFunc("to",t.space);return e===i?o[r]:(!0===s&&(e=o[r]+e),t.mod&&(e%=t.mod),t.range&&(e=e<t.range[0]?t.range[0]:e>t.range[1]?t.range[1]:e),o[r]=e,this._spaceFunc("from",t.space,o))}},_spaceFunc:function(r,i,t){var e=i||this._hSpace;return this[r+e.charAt(0).toUpperCase()+e.substr(1)](t)}};var e={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in e)e.hasOwnProperty(s)&&(t.fn[s]=t.fn._partial(s));r.Color=t}("object"==typeof exports&&exports||this);